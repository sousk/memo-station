- if @article.new_record?
  - @page_title ||= 
  - button_name ||= "登録"
- else
  - @page_title ||= "メモ編集"
  - button_name ||= "更新"

- @topic_path_last ||= @page_title

%h2 新規メモ
= render :partial => 'article', :object => @article
/ <% end -%>
/ 
/ <%= javascript_tag "
/ 
/ function article_edit_auto_focus() {
/   // フォーカス設定
/   // 題名→内容→タグの順に空いたところを見て、すべて埋まっていたら内容にフォーカスする
/   if (!Field.present('article_subject')) {
/     $('article_subject').focus();
/   } else if (!Field.present('article_body')) {
/     $('article_body').focus();
/   } else if (!Field.present('article_my_tags')) {
/     $('article_my_tags').focus();
/   } else {
/     $('article_body').focus();
/   }
/ }
/ 
/ Event.observe(window, 'load', function(){
/   article_edit_auto_focus();
/ 
/   // URL覧
/   if (Field.present('article_url')) {
/     // フィルインあり→「URL覧」と「URL表示アイコン」を表示
/     $('article_url_label').show();
/     $('article_url').show();
/     $('article_url_show').hide();
/   } else {
/     // フィルインあり→「URL覧」と「URL表示アイコン」を消去
/     $('article_url_label').hide();
/     $('article_url').hide();
/     $('article_url_show').show();
/   }
/ }, false);
/ 
/ // 「URL表示アイコン」のクリックに対応。
/ // URL覧を表示する。
/ function article_url_show() {
/   $('article_url_show').hide();
/   $('article_url_label').show();
/   $('article_url').show();
/   $('article_url').focus();
/ }
/ " %>
/ 
/ <% if defined? Chasen -%>
/   <%= observe_field(:article_subject,{
/     :frequency => 0.5,
/     :url => {:controller => "articles",:action => "subject_input_remote"},
/     :with => "'subject=' + encodeURIComponent(value) + '&my_tags=' + encodeURIComponent($F('article_my_tags'))",
/   })%>
/ <% end -%>
/ 
/ <%= observe_field(:article_my_tags,{
/   :frequency => 0.5,
/   :url => {:controller => "articles",:action => "my_tags_input_remote"},
/   :with => "'my_tags=' + encodeURIComponent($F('article_my_tags'))",
/ })%>
/ 
/ <%= observe_field(:article_subject,{
/   :frequency => 0.5,
/   :url => {:controller => "articles",:action => "subject_input_remote"},
/   :with => "'subject=' + encodeURIComponent($F('article_subject')) + '&id=#{@article.id}'"
/ })%>
/ 
/ <%= javascript_tag "
/ 
/ // タグのフィールドにあるタグのリスト
/ function tag_names_get(id) {
/     return $F(id).strip().split(/\s+/);
/ }
/ 
/ // タグのフィールドに指定のタグを入力する。
/ // すでにタグがある場合はそれを消す。
/ function tag_toggle(tag_name) {
/     var id = 'article_my_tags';
/     $(id).value = __tag_toggle(tag_names_get(id, tag_name));
/ }
/ 
/ " %>
